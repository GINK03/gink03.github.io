---
layout: post
title: "n8n"
date: 2025-09-13
excerpt: "n8nの紹介と使い方について"
tag: ["ツール", "自動化", "ノーコード"]
config: true
comments: false
sort_key: "2025-09-13-n8n"
update_dates: ["2025-08-23", "2025-08-24"]
---

# n8nの紹介と使い方について

## 概要
 - ワークフロー自動化ツール
 - セルフホストなら無料で利用可能
 - AI連携も可能で、各種ノードをMCPのように扱える
   - MCPよりも再現性が低い傾向がある
 - Cloudflare Tunnel + Accessで外部公開も可能

## Dockerによる起動

```console
# ボリュームの作成
$ docker volume create n8n_data

# 起動
$ docker run -it --rm \
 --name n8n \
 -p 5678:5678 \
 -e GENERIC_TIMEZONE="Asia/Tokyo" \
 -e TZ="Asia/Tokyo" \
 -e WEBHOOK_URL="https://n8n-oci.hut42.tech" \
 -e N8N_ENFORCE_SETTINGS_FILE_PERMISSIONS=true \
 -e N8N_RUNNERS_ENABLED=true \
 -e N8N_SECURE_COOKIE=false \
 -v n8n_data:/home/node/.n8n \
 docker.n8n.io/n8nio/n8n
```

## ユースケース
 - Webhook
   - 外部サービスからのデータ受信
   - AIによるデータ処理
   - JSON形式でのレスポンス返却
 - Google Workspace連携
   - Google SheetsやGmailなどのGoogleサービスと連携
   - データの自動更新やメール送信などの自動化

## Google Workspace連携
 - GCP側の設定
   - GCPでOAuth 2.0クライアントIDを作成
   - OAuth同意画面の設定
 - n8n側の設定
   - n8nでGoogle Workspaceノードを設定
     - 認証情報（client_id, client_secret）の設定
   - Google Sheets/Gmailノードの設定

## 具体例

**Webhookが呼び出されたら、AIエージェントで現在日時を参照し、季節や時間に合った俳句を生成し、結果をメール送信とWebhookのレスポンスで返す**

```console
$ date
2025-09-13 21:17:57 JST
$ curl -H "X-API-KEY: *******" "https://n8n-oci.hut42.tech/webhook/9a67dda1-4292-42a1-82a4-8d37ed59cdbe"
{"haiku":"秋の夜 土曜の静寂 虫の声"}
```

