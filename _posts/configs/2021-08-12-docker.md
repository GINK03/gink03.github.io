---
layout: post
title: "docker"
date: 2021-08-12
excerpt: "dockerの使い方"
tags: ["container", "docker"]
config: true
comments: false
---

# dockerの使い方
 - ユースケース
   - 最終的な提出物になることが多い

## debian, ubuntuへのインストール
 - デフォルトパッケージと`apt`で入るdockerは良くないらしい
 - 公式のドキュメントに従って入れる
   - [debian](https://docs.docker.com/engine/install/debian/)
   - [ubuntu](https://docs.docker.com/engine/install/ubuntu/)
 - ユーザをdocker groupに追加する
   - `sudo usermod -aG docker $USER`

**dockerをインストールしていることでOSの調子が悪い時**  
 - 動作させているカーネルのバージョンを下げる
 - 下げた状態で`docker-ce`などdocker関連のパッケージを削除することで復帰することができる
 - 公式のdockerが安定するまでしばらく様子を見る

## localhostで起動しているサーバに接続したいとき
 - コンテナ起動時のオプションに`--network="host"`をつなげるとIPを分離しなくなる

## `-v`, `--volume`オプションについて
`docker -it -v volume:/volume`と`docker -it -v $PWD/volume:/volume`では意味が異なる  
POSIXパスで記入すると、ローカルのファイルシステムにマップするものになる  
そうでないと、`docker volume`というdocker固有のファイルシステムにマップされる  

**volumeの確認**  
```console
$ docker volume ls
```

## 不要なイメージ、コンテナ、ボリュームの削除

```console
$ docker system prune -a
```
