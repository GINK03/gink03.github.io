---
layout: post
title: "requests"
date: 2021-07-30
excerpt: "requestsの使い方"
project: false
config: true
tag: ["python", "requests"]
comments: false
---

# requestsの使い方
 - pythonのライブラリである
 - http, https経由のコンテンツを取得できる

## proxyを使用する
 - socks5が鉄板

**インストール**  

```console
$ python3 -m pip install requests[socks]
```

**使用例**  

```python
import requests

with requests.get(url, proxies=dict(http="socks5://user:pass@host:port", https="socks5://user:pass@host:port")) as r:
	html = r.text
```

## 取得したコンテンツの文字コードを推定する

```python
with requests.get(url, headers=headers, proxies=proxies) as r:
	r.encoding = r.apparent_encoding
	html = r.text
```
 - たまに失敗するので明示的に指定できれば確実

## 取得したコンテンツの文字コードを指定する

**sjisに指定する例**  

```python
with requests.get(url, headers=headers, proxies=proxies) as r:
	r.encoding = "sjis"
	html = r.text
```


