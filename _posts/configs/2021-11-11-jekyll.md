---
layout: post
title: "jekyll"
date: "2021-11-11"
excerpt: "jekyllの使い方とトラブルシューティング"
project: false
config: true
tag: ["github.io", "jekyll", "ruby"]
comments: false
sort_key: "2022-05-23"
update_dates: ["2022-05-23","2022-03-23","2022-03-20","2021-11-11"]
---

# jekyllの使い方とトラブルシューティング

## 概要
 - NOTE
   - rubyの2.x系までのサポートなので、rbenvなどでruby 2系の環境で行う必要がある

## 新規にページを作成する
 - root directoryに`<url-name>/index.md`を追加
 - `index.md`には実態を記述した`layout`を記す
 - `layout`で指定した名前のマークダウンを`_layouts/<specified_name>.md`に記す
 - `<specified_name>.md`にはどのファイルをロードして描画するかのスクリプトを組み込む

## localでjekyllをserveする
 - ローカルでserveできればgithub.ioでも問題なく動作すると期待できる  

**bundleで必要なファイルをインストール**  

```console
$ bundle install
```

**ローカルでサーブする**  

```console
$ bundle exec jekyll serve
```

## トラブルシューティング

#### github.io上でアップロードしたはずのファイルにURLでアクセスできない
 - 最初の数行にyaml形式のメタ情報を記述する欄があり、そのパースに失敗している可能性
   - `"何か"`が`""何か`などになっていたりパースできない状態などがよくありえる
 - ローカルで`bundle exec jekyll serve`することでパースに失敗したファイルのエラーが標準出力にでるので確認できる

#### githubでビルドが失敗する
 - ローカルで動作するか確認する
   - 動作しなければ何か問題が発生している

#### libffi.so.7がない
 - [askubuntu](https://askubuntu.com/questions/1286772/libffi-so-7-cannot-open-shared-object-file-no-such-file-or-directory)

#### Latexの数式のパースに失敗する
 - `s^2`をカッコで囲ったような表現をjekyllはパースに失敗する事がある
 - 表現が限定されてしまうがカッコを消す等で対処する

## 参考
 - [Quickstart for GitHub Pages](https://docs.github.com/ja/pages/quickstart)

