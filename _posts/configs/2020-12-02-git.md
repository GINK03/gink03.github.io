---
layout: post
title: "git"
date: 2021-01-04
excerpt: "gitã‚³ãƒãƒ³ãƒ‰ã®ä½¿ã„æ–¹"
project: false
config: true
tag: ["git", "github"]
comments: false
sort_key: "2022-05-24"
update_dates: ["2022-05-24", "2022-04-21","2022-02-03","2022-01-07","2022-01-07","2022-01-01","2021-10-25","2021-09-13","2021-08-23","2021-07-18","2021-02-25","2021-02-23","2021-02-17","2021-01-04","2020-12-13","2020-12-02","2020-12-02"]
---

# gitã‚³ãƒãƒ³ãƒ‰ã®ä½¿ã„æ–¹

## æ¦‚è¦
 - å³å¯†ã«ã¯`git`ã¨`github`ã¯ç•°ãªã‚Šã€gitã‚’å®Ÿè£…ã—ãŸã‚µãƒ¼ãƒ“ã‚¹ãŒgithubãªã®ã§ã‚ã‚‹ãŒã€githubã®æ©Ÿèƒ½ã«ã¤ã„ã¦ã‚‚ã“ã®ãƒšãƒ¼ã‚¸ã«è¨˜ã™
 - æœ€è¿‘ã§ã¯äººæ¨©ã®è¦³ç‚¹ã‹ã‚‰mainãƒ–ãƒ©ãƒ³ãƒãªã©å‘¼ç§°ãŒå¤‰æ›´ã•ã‚ŒãŸã‚‚ã®ã‚‚ã‚ã‚‹

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

**debian, ubuntu**  
```console
$ sudo apt install git
```

**osx**  
```console
$ brew install git
```

**windows**  
```console
$ scoop install git
```

---

## ãƒãƒ¼ãƒ é–‹ç™ºã®ãƒ•ãƒ­ãƒ¼
 - è‡ªåˆ†ã‚³ãƒ¼ãƒ‰ã‚’mainã‹ã‚‰åˆ†é›¢ã™ã‚‹ãŸã‚ã«branchã‚’ä½œã‚‹(1)
 - branchã§é–‹ç™ºã‚’é€²ã‚ã€pull requestã‚’é€ã‚‹å‰ã«ã€mainã‹ã‚‰pullã—ã¦å·®åˆ†ã‚’å–ã‚Šè¾¼ã‚€(2)
 - pull requestã‚’é€ã‚‹(3)
 - å·®åˆ†ã‚’ç¢ºèªã—ã€ãƒ¬ãƒ“ãƒ¥ãƒ¼ã™ã‚‹(4)

### (1)ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆã™ã‚‹
```console
$ git branch <my-dev-name>
$ git checkout <my-dev-name> # ãƒ–ãƒ©ãƒ³ãƒã‚’åˆ‡ã‚Šæ›¿ãˆ
```

### (2)mainã‹ã‚‰å·®åˆ†ã‚’å–ã‚Šè¾¼ã‚€
```console
(<my-dev-name>)$ git fetch
(<my-dev-name>)$ git rebase origin/main
(<my-dev-name>)$ git pull
```

### (3)pull requestã‚’é€ã‚‹
 - gitã®webç”»é¢ã‹ã‚‰`create pull request`ã®ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™

### (4)å·®åˆ†ã‚’ç¢ºèªã—ã€ãƒ¬ãƒ“ãƒ¥ãƒ¼ã™ã‚‹
 - `https://github.com/<team>/<project-name>/pull/10`ã¨ã„ã†URLãŒpull requestã®ã¨ã
 - `https://github.com/<team>/<project-name>/pull/10.diff`ã¨æœ«å°¾ã«ã¤ã‘ã‚‹ã¨å·®åˆ†ã‚’diffã‚³ãƒãƒ³ãƒ‰ã®å‡ºåŠ›ã®æ§˜ã«ç¢ºèªã§ãã‚‹
 - ãªã«ã‹æ°—ã«ãªã‚‹ç‚¹ã€ä¿®æ­£ã™ã¹ãç‚¹ãŒã‚ã‚Œã°ã€pull requestã®ã‚³ãƒ¡ãƒ³ãƒˆæ¬„ã«æ›¸ãè¾¼ã‚€

---

## ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹
 - ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨ã‚³ãƒ¼ãƒ‰ã®å¤‰æ›´ã¯å¯¾å¿œã—ã¦ã„ã‚‹ã¹ãã§ã‚ã‚‹
 - ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ãƒ¬ãƒ“ãƒ¥ãƒ¯ãƒ¼ã®è² è·ã«ã‚‚é–¢ä¿‚ã™ã‚‹
 - ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«çµµæ–‡å­—ã‚’ä½¿ç”¨ã™ã‚‹æ–‡åŒ–ã‚‚ã‚ã‚Šã€çµµæ–‡å­—ã«ã‚ˆã‚Šå¤‰æ›´ã®å†…å®¹ã‚’ç¤ºã™ã‚‚ã®ã§ã‚ã‚‹
 - çµµæ–‡å­—ã®ä¾‹
   - ğŸ›Â `:bug:`Â ãƒã‚°ä¿®æ­£
   - ğŸ‘Â `:+1:`Â æ©Ÿèƒ½æ”¹å–„
   - âœ¨Â `:sparkles:`Â æ©Ÿèƒ½è¿½åŠ 
   - ğŸ”¥Â `:fire:`Â ä¸è¦ãªæ©Ÿèƒ½ã®å‰Šé™¤
   - ğŸ‘•Â `:shirt:`Â lintä¿®æ­£
   - âš¡Â `:zap:`Â ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„
   - ğŸ‘®Â `:cop:`Â ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾å¿œ
   - ğŸ¨Â `:art:`Â ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°ã®è¿½åŠ ãƒ»ä¿®æ­£
   - ğŸ“Â `:memo:`Â ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®è¿½åŠ ãƒ»ä¿®æ­£
   - âœ…Â `:white_check_mark:`Â ãƒ†ã‚¹ãƒˆã®è¿½åŠ ãƒ»ä¿®æ­£
   - ãƒ©ã‚¤ãƒ–ãƒ©ãƒªé–¢é€£
      - â•Â `:heavy_plus_sign:`Â ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®è¿½åŠ 
      - â–Â `:heavy_minus_sign:`Â ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å‰Šé™¤
      - â¬†ï¸Â `:arrow_up:`Â ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ
      - â¬‡ï¸Â `:arrow_down:`Â ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒ€ã‚¦ãƒ³ã‚°ãƒ¬ãƒ¼ãƒ‰
 - çµµæ–‡å­—ã¨å½¹å‰²ã‚’ç¤ºã—ãŸãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”¨æ„ã—ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«ç™»éŒ²ã™ã‚‹ã¨ã‚„ã‚Šã‚„ã™ã„
    - `git config --global commit.template <filename>`

---

## è¨­å®š

#### åˆæœŸã‚»ãƒƒãƒ†ã‚£ãƒ³ã‚°

`username`ã¨`email address`ãŒé©åˆ‡ã«è¨­å®šã•ã‚Œã¦ã„ãªã„ã¨ã€githubã§è‡ªåˆ†ãŒremote pushã—ãŸã“ã¨ã«ãªã‚‰ãªã„  

**username**  

```console
$ git config --global user.name "gimpei.kobayashi"
```
 - é©å®œ,åå‰ã®éƒ¨åˆ†ã‚’å¤‰ãˆã¦ãã ã•ã„

**email address**  

```console
$ git config --global user.email "gim.kobayashi@gmail.com"
```
 - é©å®œ,emailã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å¤‰ãˆã¦ãã ã•ã„

**ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¨ãƒ‡ã‚£ã‚¿ã®è¨­å®š**  

```console
$ git config --global core.editor vim
```
 - é©å®œ,å¥½ããªã‚¨ãƒ‡ã‚£ã‚¿ã‚’è¨­å®šã—ã¦ãã ã•ã„

**ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ–ãƒ©ãƒ³ãƒã‚’å‘½åã™ã‚‹**  

```console
$ git config --global init.defaultBranch main
```
 - mainã®éƒ¨åˆ†ã‚’ä½¿ç”¨ã—ãŸã„åå‰ã«ã™ã‚‹

**non-asciiã‚’escapeã—ãªã„**  

```console
$ git config --global core.quotepath false
```

#### ã‚»ãƒƒãƒ†ã‚£ãƒ³ã‚°ã®ç¢ºèª

```console
$ git config --list
```

#### `git clone`
ãƒªãƒ¢ãƒ¼ãƒˆãƒ¬ãƒã‚¸ãƒˆãƒªã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã«ã‚³ãƒ”ãƒ¼ã™ã‚‹  
```console
$ git clone git@foo:bar/project
```
ãƒªãƒ¢ãƒ¼ãƒˆãƒ¬ãƒã‚¸ãƒˆãƒªã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã®æŒ‡å®šã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåã§ã‚³ãƒ”ãƒ¼ã™ã‚‹
```console
$ git clone git@foo:bar/project <target-directory>
```

#### `git commit -m "foobar"`(ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸)ã®ä¿®æ­£

ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’æ‰“ã¤ã¨editor(vimç­‰)ã«ã¦ç·¨é›†ã§ãã‚‹
```console
$ git commit --amend
```

#### commitå‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ç·¨é›†ã‚’å–ã‚Šæ¶ˆã™

```console
$ git restore ${FILENAME}
```

#### å˜ä½“ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒªã‚»ãƒƒãƒˆ(HEADã®çŠ¶æ…‹ã«)ã™ã‚‹(å˜ä½“ãƒ•ã‚¡ã‚¤ãƒ«ã‚’revertã™ã‚‹)

```console
$ # gitãƒ¬ãƒã‚¸ãƒˆãƒªã®ãƒˆãƒƒãƒ—ã§å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚‹
$ git checkout HEAD -- ${FILEPATH_FROM_TOP_DIR}
```
 - æ§˜ã€…ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’å¤‰æ›´ã—ãŸãŒç‰¹å®šã®ãƒ•ã‚¡ã‚¤ãƒ«ã ã‘ã€HEADã®çŠ¶æ…‹ã«æˆ»ã—ãŸã„ã¨ã
 - `--`ã¯ç¶šãå¼•æ•°ã¯ãƒ•ã‚¡ã‚¤ãƒ«åã¨ã—ã¦æ‰±ã†ã¨ã„ã†æ„å‘³

#### ç¾åœ¨ã®ç·¨é›†ã‚’å–ã‚Šæ¶ˆã—ã¦ç‰¹å®šã®commid idã¸æˆ»ã™
 - èª¤ã£ã¦å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¶ˆã—ãŸã¨ã
 - commitã‚’æ”¾æ£„ã—ã¦ã‚‚ã„ã„ã‹ã‚‰ã‚‚ã¨ã«æˆ»ã—ãŸã„ã¨ã
 - `commit id`ã¯`git log`ã‹ã‚‰ç¢ºèªã§ãã‚‹

```console
$ git reset ${COMMIT_ID}
```

#### `https`ã‚’`ssh`ã¸å¤‰æ›´

```console
$ git remote set-url origin ${SSH_PROTOCOL_PATH}
```
 - äºŒæ®µéšèªè¨¼ç­‰ã‚’å°å…¥ã™ã‚‹ã¨sshã§ã—ã‹æ“ä½œã‚’å—ã‘ä»˜ã‘ãªããªã‚‹

#### ãƒªãƒ¢ãƒ¼ãƒˆã®URLã‚’ç¢ºèª

```console
$ git config --get remote.origin.url
```
 - å¯¾è±¡ã®gitãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…éƒ¨ã§å®Ÿè¡Œã™ã‚‹

#### ã‚³ãƒŸãƒƒãƒˆå‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®å·®åˆ†ã‚’ç¢ºèª

```console
$ git diff ${FILENAME}
```

#### ã‚³ãƒŸãƒƒãƒˆå¾Œã®ãƒªãƒ¢ãƒ¼ãƒˆãƒ–ãƒ©ãƒ³ãƒã¨ã®å·®åˆ†ã®ç¢ºèª

```console
$ git fetch origin master
$ git diff origin/master -- ${FILENAME}
```

#### `git add`ã§å…¨éƒ¨è¿½åŠ 

```console
$ git add --all
```

#### git directory
 - `.git/`ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ã“ã¨
 - git directoryã¯ã™ã¹ã¦ã®å¤‰æ›´ã‚„å±¥æ­´ã‚’å«ã‚“ã§ã„ã‚‹


#### stageã¨commit
 - stageã¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä»Šç·¨é›†ã—ã¦ã„ã‚‹çŠ¶æ…‹(git statusã§å¤‰åŒ–ãŒè¦‹ãˆã‚‹çŠ¶æ…‹)
 - commitã¯commitã—ãŸçŠ¶æ…‹


#### git init
 - `git init`ã™ã‚‹ã¨ä»»æ„ã®directoryã§`.git`ãŒä½œã‚‰ã‚Œã‚‹
 - remoteã«ãƒ¬ãƒã‚¸ãƒˆãƒªã‚’ä½œã‚‰ãªã„ã¨ãã¯è‰¯ã„é¸æŠ


#### git config -l
 - `git config -l`ã§ä»Šã®æ“ä½œã—ã¦ã„ã‚‹ãƒ¬ãƒã‚¸ãƒˆãƒªã®è¨­å®šä¸€è¦§ã‚’è¦‹ã‚‹ã¨ãŒå¯èƒ½


#### git log
 - gitã®commitãƒ­ã‚°


#### git revert HEAD
 - ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ã®ã“ã¨
 - ã‚‚ã¨ã«æˆ»ã™
 - ã‚‚ã¨ã«æˆ»ã™ãŸã‚ã®æ–°è¦commitãŒç”Ÿæˆã•ã‚Œã‚‹


#### master(main) branch
 - ã‚ˆãå‹•ãã“ã¨ã‚’æ‹…ä¿ã—ãŸã„
 - ãã®ä»–ã¯å®Ÿé¨“ã¨ã„ã†ä½ç½®ã¥ã‘


#### git branch
 - ä»Šã„ã‚‹branch
 - `git branch hoge`ã§hoge branchã‚’ä½œã‚‹


#### git checkout ${BRANCH_NAME}
 - ç‰¹å®šã®branchã«åˆ‡ã‚Šæ›¿ãˆã‚‹
 - `git checkout -b ${BRANCH_NAME}`ã§å­˜åœ¨ã—ãªã„branchã§ã‚‚åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã‚‹


#### git merge
 - åŒæ™‚ã«masterã¨ä»–ã®brachã®hashãŒåŒã˜å€¤ã‚’æŒ‡ã™ã“ã¨ã«ãªã‚‹
 - master branchã«ã¦ã€`git merge ${TARGET_BRANCH}`ã™ã‚‹ã¨mergeã«ãªã‚‹


#### git remote update
 - ãƒãƒ¼ã‚¸ã›ãšã«ç¾åœ¨ã®branchã‚’ãƒªãƒ¢ãƒ¼ãƒˆã‹ã‚‰ãƒ­ãƒ¼ã‚«ãƒ«ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ


#### git remote show origin
 - ãƒªãƒ¢ãƒ¼ãƒˆã®æƒ…å ±ã‚’è¦‹ã‚‹ã®ã«ä½¿ã†


#### git fetch
 - branchã®ãƒ‡ãƒ¼ã‚¿ã‚’ãƒªãƒ¢ãƒ¼ãƒˆã‹ã‚‰ãƒ­ãƒ¼ã‚«ãƒ«ã«å¼•ã£å¼µã£ã¦ãã‚‹


#### explicit merge
 - æ–°ãŸãªãƒãƒ¼ã‚¸ã‚³ãƒŸãƒƒãƒˆã‚’ä½œæˆã™ã‚‹ã‚¿ã‚¤ãƒ—ã®ãƒãƒ¼ã‚¸


#### git pull
 - è‡ªå‹•ãƒãƒ¼ã‚¸


#### pull request
 - web UIã§ä½œã‚‹
 - pull requestsã®ã‚³ãƒ¡ãƒ³ãƒˆã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãŒã‚ã‚‹


#### ãƒªãƒ¢ãƒ¼ãƒˆãƒ–ãƒ©ãƒ³ãƒã®URLã‚’çŸ¥ã‚‹
```console
$ git config --get remote.origin.url
```

#### project ã‚³ãƒ¼ãƒ‡ã‚£ãƒãƒ¼ã‚¿ã«ã¨ã£ã¦é‡è¦ãªã“ã¨
 - pull requestã®å³æ™‚å¿œç­”
 - acceptå†…å®¹ã®ç†è§£
 - issue trackerã‚’æ­£ã—ãè¿½ã†

#### CI/CD
 - CI: è‡ªå‹•ãƒ†ã‚¹ãƒˆçš„ãªã‚„ã¤
 - CD: ãƒ­ãƒ¼ãƒªãƒ³ã‚°ãƒªãƒªãƒ¼ã‚¹çš„ãªã‚„ã¤
 - æ—¢å­˜ã®ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹ã«ã¯ãã®ã¾ã¾commitã‚’åˆ»ã‚ã°è‰¯ã„


#### pull requestã®ç·¨é›†å·®åˆ†ã‚’ã¿ã‚‹
**pull requestã®URLã‹ã‚‰å·®åˆ†ã‚’ç¢ºèªã™ã‚‹**  
 - `https://github.com/weppos/whois/pull/90`ã¨ã„ã†URLãŒã‚ã‚‹ã¨ã
 - `https://github.com/weppos/whois/pull/90.diff`ã¨æœ«å°¾ã«ã¤ã‘ã‚‹ã¨å·®åˆ†ã‚’diffã‚³ãƒãƒ³ãƒ‰ã®plane textã§ç¢ºèªã§ãã‚‹

#### ãƒªãƒ¢ãƒ¼ãƒˆã®mainä»¥å¤–ã®ãƒ–ãƒ©ãƒ³ãƒã«åˆ‡ã‚Šæ›¿ãˆã‚‹
 - `git branch -a`ã§ãƒªãƒ¢ãƒ¼ãƒˆã‚’å«ã‚ãŸãƒ–ãƒ©ãƒ³ãƒä¸€è¦§ã®ç¢ºèª
 - `git switch`ã§ãƒªãƒ¢ãƒ¼ãƒˆã®ä»»æ„ã®ãƒ–ãƒ©ãƒ³ãƒã«åˆ‡ã‚Šæ›¿ãˆã‚‹(ãƒ­ãƒ¼ã‚«ãƒ«ã®å†…å®¹ã‚‚ãƒªãƒ¢ãƒ¼ãƒˆã¨åŒæœŸã•ã‚Œã‚‹)

```console
$ git branch -a # ãƒ–ãƒ©ãƒ³ãƒã®ä¸€è¦§ã®ç¢ºèª
* master
  remotes/origin/HEAD -> origin/master
  remotes/origin/dev
  remotes/origin/master
$ git switch remotes/origin/dev # ãƒªãƒ¢ãƒ¼ãƒˆã®ãƒ–ãƒ©ãƒ³ãƒã«åˆ‡ã‚Šæ›¿ãˆã‚‹
```

---

## ã‚»ãƒ³ã‚·ãƒ†ã‚£ãƒ–ãªãƒ‡ãƒ¼ã‚¿ã‚’gitã®remoteã«åæ˜ ã—ã¦ã—ã¾ã£ãŸæ™‚ã®å¯¾å¿œ
 - ä½œæ¥­ã®æµã‚Œ
   - remoteã¨localã‚’åŒæœŸã™ã‚‹
   - `git-filter-repo`ã§localã®ãƒ¬ãƒã‚¸ãƒˆãƒªã®å±¥æ­´ã‹ã‚‰ã‚»ãƒ³ã‚·ãƒ†ã‚£ãƒ–ãªãƒ‡ãƒ¼ã‚¿ã‚’å–ã‚Šé™¤ã
   - remote urlãŒå¤±ã‚ã‚Œã‚‹ã®ã§å†è¨­å®š
   - force pushã§ãƒªãƒ¢ãƒ¼ãƒˆã‚’ä¸Šæ›¸ã
 - å‚è€ƒ
   - [Removing sensitive data from a repository/GitHub Docs](https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/removing-sensitive-data-from-a-repository)

### git-filter-repoã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

**ubuntu, debian**
```console
$ sudo apt install git-filter-repo 
```

### ã‚»ãƒ³ã‚·ãƒ†ã‚£ãƒ–ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤(å±¥æ­´ã‹ã‚‰ã‚‚æ¶ˆãˆã‚‹)

```console
$ git filter-repo --invert-paths --path <target-file-or-dir>
```

### remote urlã‚’å†è¨­å®š

```console
$ git remote add origin <git-url>
```

### å¼·åˆ¶çš„ã«pushã™ã‚‹

```console
$ git push origin --force --all
```

