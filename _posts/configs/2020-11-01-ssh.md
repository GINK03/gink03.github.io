---
layout: post
title:  "ssh"
date:   2020-11-01
excerpt: "ssh"
project: false
config: true
tag: ["ssh", "sshd"]
comments: false
---

# ssh

## 絶対やっておくべきこと

**passwordログインの無効化**  
```console
$ echo "PasswordAuthentication no" | sudo tee -a /etc/ssh/sshd_config
```

**`ssh.service`の再起動**
```console
$ sudo systemctl restart ssh.service
```
再起動しないとpasswordログインの無効化が反映されない

## configの書き方

`~/.ssh/id_github`が秘密鍵のとき、以下のようにする  

githubとか公開鍵を登録しているときなど便利  

```config
Host github.com 
  User git                                       
  Port 22                                        
  HostName github.com                            
  IdentityFile ~/.ssh/id_github
  TCPKeepAlive yes                               
  IdentitiesOnly yes 

Host bitbucket.org
  User git                                       
  Port 22                                        
  HostName bitbucket.org
  IdentityFile ~/.ssh/id_github
  TCPKeepAlive yes                               
  IdentitiesOnly yes 

Host *
  StrictHostKeyChecking no
  ForwardX11Timeout 596h

Host 192.168.*.*
  IdentityFile ~/.ssh/id_github
  TCPKeepAlive yes                               
  IdentitiesOnly yes 
Host 2620:9b::*
  IdentityFile ~/.ssh/id_github
  TCPKeepAlive yes                               
  IdentitiesOnly yes
```
