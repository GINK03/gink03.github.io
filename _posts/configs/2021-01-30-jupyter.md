---
layout: post
title: "jupyter"
date: 2021-01-30
excerpt: "jupyter notebookの設定やチートシート"
project: false
config: true
tag: ["jupyter", "python"]
comments: false
---

# jupyter notebookの設定やチートシート

## ショートカット
 - viのようにモードが有る
   - esc: command mode
   - enter: edit mode

 - コマンドモードでマークダウン、コードに変更する
   - `m`
	   - マークダウンへ変更
   - `y`
       - コードへ変更

 - エニーモードで、セルの実行をする
   - `ctrl+enter`
	 - セルを実行
   - `shift+enter`
	 - セルを実行して下のセルへ移動
   - `alt+enter`
	 - セルを実行して下へからのセルを追加

 - コマンドモードでセルを追加
   - `a`
     - 上へ追加
   - `b`
     - 下へ追加

## `pip`, `conda`でのインストール

パス参照が異なることがあるため、`%`を用い、`!`を使用しない
```python
%pip install foo bar
```

## `tqdm`
```python
from tqdm import tqdm_notebook
```

## `warnings`
```python
import warnings
warnings.filterwarnings("ignore")
```

## %%writefile
セルの最初に記述すると、そのセルの内容がファイルとして出力されるという機能  
 - e.g. 
   - `%% writefile a.py`
     - `a.py`で出力する

## %watermark
実行している`os`, `マシンスペック`, `python`, `jupyter`の環境を表示するmagic

```python
%pip install watermark # 必要ならば
%load_ext watermark
%watermark
```

## %autoreload
自作したpythonモジュール等をimportたびに更新するmagic
```python
%load_ext autoreload
%autoreload 2
```

## `.jupyter/jupyter_notebook_config.py`
jupyter notebookの設定ファイルに該当するもの
 - IPのアクセス制限を設けない -> `c.NotebookApp.ip = "0.0.0.0"`
 - 起動時にブラウザを立ち上げない -> `c.NotebookApp.open_browser = False`
 - パスワードのhash値を登録 -> `c.NotebookApp.password = "something_hash"`
 - ノートブックのポートを設定 -> `c.NotebookApp.port = something_port`

```python
c.NotebookApp.ip = "0.0.0.0"
c.NotebookApp.open_browser = False
c.NotebookApp.password = u"sha1:f1d4830a643a:4a247c958f7a5c2a9cd4ba5b419a09a76ae2bfaf"
c.NotebookApp.port = 8888
```

## パスワードのhash値を作成する
 - [link](https://jupyter-notebook.readthedocs.io/en/stable/public_server.html#preparing-a-hashed-password)

ipython等で以下のプロセスを行う
```python
In [1]: from notebook.auth import passwd
In [2]: passwd()
Enter password:
Verify password:
Out[2]: 'sha1:67c9e60bb8b6:9ffede0825894254b2e042ea597d771089e11aed'
```

## セルの実行方法

## r-kernelのインストール

**ubuntuにて**  
```console
$ sudo apt-get install r-base
$ R
> install.packages('IRkernel')
...(様々な表示が出る)...
> IRkernel::installspec()
```

**osxにて**  
```console
$ brew install r
$ R
> install.packages('IRkernel')
...(様々な表示が出る)...
> install.packages('IRkernel')
```
*appendix*  

rstudioをインストールする 
```console
$ brew install --cask rstudio
```
