---
layout: post
title: "分散分析"
date: 2021-08-24
excerpt: "分散分析について"
kaggle: true
hide_from_post: true
tag: ["statistics"]
comments: false
---

# 分散分析について
 - カテゴリごとの分散 vs 全体の分散をF分布を用いた検定を行うことで差があるかどうかを測定するもの

## 一元配置分散分析

### 用語説明
 - **あるカテゴリごとにいくつかサンプルがあるデータ**
   - e.g. 都道府県ごとの映画館の数
 - **平方和**
   - カテゴリごとの平方和を求める
	 - カテゴリの平均の誤差の二乗和
   - 全体の平方和を求める
 - **自由度**
   - 自由度をカテゴリの数-1、全体のサンプル数-1それぞれ求める
 - **平均平方**
   - 自由度を割った数
 - **F値**
   - 全体の平均平方/カテゴリの平均平方
   - F値は`F(自由度n, 自由度m), n: カテゴリ-1, m: 全体-1`を参照する

 - [参考](https://bellcurve.jp/statistics/course/10006.html)

### 分析プロセス
 1. カテゴリごとの平均を求める
 2. 全体の平均を求める
 3. `(カテゴリごとの平均 - 全体の平均)^2*カテゴリの要素数`をすべてのカテゴリについて計算する
 4. `(要素 - 全体の平均)^2`をすべての要素について計算する
 5. 残差を`[4] - [3]`と定義する
 6. カテゴリの自由度を`カテゴリ数-1`とする
 7. 全体の自由度を`要素数-1`とする
 8. 残差の自由度を`全体の自由度-カテゴリの自由度`とする
 9. カテゴリの平方平均は`[3]/[6]`となる
 10. 残差の平方平均は`[5]/[8]`となる
 11. F値は`[9]/[10]`となる
 11. 自由度`[6],[8]`、値は`[11]`のF分布

### 計算順序表

<div>
  <img src="https://user-images.githubusercontent.com/4949982/132945586-a19029ca-4cc5-4754-90d0-6f2ca3932b3c.png">
</div>


## 二元配置分散分析

### 具体的な評価するデータ構造

<div>
  <img src="https://user-images.githubusercontent.com/4949982/132945989-191afcad-6c71-4607-b3a4-827e6965849d.png">
</div>

### 分析プロセス
一元配置分散分析と似ているが相互作用を考える点が異なる

### 計算順序表

<div>
  <img src="https://user-images.githubusercontent.com/4949982/132946455-56b36a2a-3a75-4334-85d7-7a2cfae28d25.png">
</div>
