---
layout: post
title: "共分散構造分析" 
date: 2023-03-16
excerpt: "共分散構造分析(SEM)の概要"
kaggle: true
tag: ["python", "pandas", "polars", "rust", "共分散構造分析", "構造方程式モデリング"]
comments: false
sort_key: "2023-03-16"
update_dates: ["2023-03-16"]
---

# 共分散構造分析(SEM)の概要

## 概要
 - 昔からある分析ライブラリの一つ
 - 複雑な変数同士の有方向グラフでの相関を見ることができる
   - Marketing Mix Modelingの使い方に少し近い
 - 測定モデル
   - 複数の特徴量を束ねて一つの潜在変数を表す
 - 構造モデル
   - 潜在変数間の因果関係を示す

## 測定モデルの式

```python
"""
LatentVar1 =~ ObsVar1 + ObsVar2 + ObsVar3
LatentVar2 =~ ObsVar4 + ObsVar5 + ObsVar6
"""
```
 - `ObsVar`; 特徴量
 - `LatentVar`; 潜在変数

## 構造モデル

```python
"""
LatentVar3 ~ LatentVar1 + LatentVar2
"""
```
 - `Var1`と`Var2`が`Var3`の因果になっているというモデル


## pythonライブラリ, semopyインストール

```console
$ python3 -m pip install somopy
```

## semopyの使い方
 - データをpandasのデータフレームで用意する
 - カラム名を変数名としてネットワークを定義する
 - ネットワークに対してフィットして結果を確認

### Google Colab
 - [共分散構造分析-example](https://colab.research.google.com/drive/1C9M_E-kHbZkUCB2oVnAPC7TUJ1midibu?usp=sharing)

---

## 参考
 - [共分散構造分析（SEM）](https://www.macromill.com/service/data_analysis/sem-covariance-structure-analysis.html)
 - [pythonによる共分散構造分析 ～MMMを添えて～](https://qiita.com/chicken_data_analyst/items/b06ae940c48431a74e70)
